var t=function(t){return self._wb_wombat&&self._wb_wombat.local_init&&self._wb_wombat.local_init(t)||self[t]};self.__WB_pmw||(self.__WB_pmw=function(t){return this.__WB_source=t,this});{let $=function(){k(),w(),x(),ft(),C(),et(),tt(),0!=g[v.enable_auto_run]&&F()},k=function(){if(S()!=o)if(buttons=[{text:"OK",callback:null,confirm:!0}],u){var t=bt.top.$.jStorage.get("profileList");bt.top.$.each(t,function(t,e){bt.top.$.jStorage.deleteKey("profile:"+e)}),bt.top.$.jStorage.set("keyPressSettings",y),Dialog.show("update_dialog","This script has recently been updated to version <span style='font-weight:bold;'>"+o+"</span> and in order for the new version to work, all profiles and settings must be reset. Sorry for any inconvenience.<br /><br/><a href='"+r+"' target='_blank'>See what's new</a>.</br>I removed the difference between the original and the Alt version of the script. Both are now equally fast and even faster than either script was before. Should you  enounter any issues, please contact me on the forum! </br></br>Enjoy!</br>Ibra Gonza II")}else Dialog.show("update_dialog","This script has recently been updated to version <span style='font-weight:bold;'>"+o+"</span><br /><br/><a href='"+r+"' target='_blank'>See what's new</a>.</br>I removed the difference between the original and the Alt version of the script. Both are now equally fast and even faster than either script was before. Should you  enounter any issues, please contact me on the forum! </br></br>Enjoy!</br>Ibra Gonza II")},w=function(){var t=bt.top.$.jStorage.get("working");null==t&&bt.top.$.jStorage.set("working",!1),S()!=o&&bt.top.$.jStorage.set("working",!1),0==n&&0==t&&(buttons=[{text:"OK",callback:null,confirm:!0}],bt.top.UI.ConfirmationBox("An error has been discovered in this version. You may continue testing the script if you haven't noticed the error.",buttons,!1,[]),bt.top.$.jStorage.set("working",!0))},x=function(){bt.top.$.jStorage.set("version",o)},S=function(){var t=bt.top.$.jStorage.get("version");return null==t?(x(),o):t},T=function(){var t=bt.top.$.trim(bt.top.$("#plunder_list_nav tr:first td:last").children().last().html().replace(/\D+/g,""));"max"==bt.top.$("#end_page").val()&&bt.top.$("#end_page").text(t),bt.top.$("#am_widget_Farm tr:last").remove(),t>parseInt(bt.top.$("#end_page").val(),10)&&(t=parseInt(bt.top.$("#end_page").val(),10)),setTimeout(function(){I(parseInt(bt.top.$("#start_page").val(),10)-1,t)},1)},I=function(t,e){if(t<e){E(filter_41+" "+(t+1)+"/"+e+" <img src='graphic/throbber.gif' height='24' width='24'></img>");var o=b[0]+bt.top.game_data.village.id+"&order="+g[v.order_by]+"&dir="+g[v.direction]+"&Farm_page="+t+"&screen=am_farm";bt.top.$.ajax({type:"GET",url:o,dataType:"html",error:function(t,e,o){},success:function(o){bt.top.$("#plunder_list tr",o).slice(2).each(function(){bt.top.$("#plunder_list tr:last").after("<tr>"+bt.top.$(this).html()+"</tr>")}),setTimeout(function(){I(t+1,e)},1)}})}else setTimeout(function(){D(),K(),E(filter_40),j()},1),bt.top.$("#plunder_list").show(),bt.top.Accountmanager.initTooltips(),l=!0,s=!0},E=function(t){bt.top.$("h3:first").html(t)},j=function(){bt.top.$("#am_widget_Farm table").each(function(){bt.top.$("tr:even:gt(0) td",this).not("table:first").css("backgroundColor","#FFF5DA"),bt.top.$("tr:odd:gt(0) td",this).not("table:first").css("backgroundColor","#F0E2BE")})},O=function(t){"n"==t?bt.top.UI.InfoMessage("Switching to next village...",500):bt.top.UI.InfoMessage("Switching to previous village...",500),bt.onkeydown=function(){},s=!1,p=!1,Timing.pause(),ht(),_t();var e=b[0]+t+bt.top.game_data.village.id+b[1];bt.top.$.ajax({type:"GET",url:e,dataType:"html",error:function(t,e){alert("Error: "+e),bt.top.$("#fader").remove(),bt.top.$("#loaders").remove()},success:function(t){var e=bt.top.$(t),o=/<\s*title\s*>([^<]+)<\/title\s*>/g.exec(t)[1],i=bt.top.$.parseJSON(t.split("TribalWars.updateGameData(")[1].split(");")[0]);bt.top.game_data=i,"undefined"!=typeof history&&"function"==typeof history.pushState&&history.pushState({},bt.top.game_data.village.name+" - Loot Assistant","https://"+bt.top.location.host+game_data.link_base_pure+"am_farm"),bt.top.$("#header_info").html(bt.top.$("#header_info",e).html()),bt.top.$("#topContainer").html(bt.top.$("#topContainer",e).html()),bt.top.$("#contentContainer").html(bt.top.$("#contentContainer",e).html()),bt.top.$("#quickbar_inner").html(bt.top.$("#quickbar_inner",e).html()),bt.top.$("head").find("title").html(o),bt.top.$("#fader").remove(),bt.top.$("#loaders").remove(),Timing.resetTickHandlers(),Timing.pause(),l=!1,s=!1,$()}})},C=function(){bt.top.$("head").append("<link type='text/css' rel='stylesheet' href='"+a+"css/style.css' />"),bt.top.$("#contentContainer h3").eq(0).after(bt.top.$("<div class='vis'id='settingsDiv'><table class='settingsTable'><thead><tr><th colspan='5'class='vis'style='padding:0px;'><h4> "+i+" - <a href='https://web.archive.org/web/20240307223803/http://forum.tribalwars.net/showthread.php?266604-ntoombs19-s-FA-Filter'target='_blank'>"+filter_02+"</a> - "+filter_42+": <select id='language'style='margin:0px;'onchange='loadLanguage(window.top.$(&quot;#language&quot;).val())'></select><span style='font-size:10px;float:right;font-weight:normal;font-style:normal'>"+filter_03+" <a href='https://web.archive.org/web/20240307223803/http://forum.tribalwars.net/member.php?22739-ntoombs19'target='_blank'>ntoombs19</a>&nbsp;<div class='vis'style='float:right;text-align:center;line-height:100%;width:12px;height:12px;margin:0px 0px 0px 0px;position:relative;background-color:tan;opacity:.7'><a href='#'num='2'onclick='uglyHider(window.top.$(this));return false;'>-</a></div></span></h4></th></tr></thead><tbody id='settingsBody'><tr><td class='col1'style='min-width:200px'><span>"+filter_04+"</span>&nbsp;<input type='text'value=''size='2'maxlength='3'id='start_page'>&nbsp;<span>"+filter_05+"</span>&nbsp;<input type='text'value=''size='2'maxlength='3'id='end_page'></td><td colspan='3'><span style='font-weight:bold'>"+filter_06+"</span>&nbsp;<img src='graphic/questionmark.png'width='13'height='13'id='enable_help'></td><td rowspan='5'valign='top'><form><input type='checkbox'id='all_none'>&nbsp;<label for='all_none'style='font-weight:bold'>"+filter_07+"</label>&nbsp;<img src='graphic/questionmark.png'width='13'height='13'id='report_help'><br><input type='checkbox'id='blue'><label for='blue'><img src='graphic/dots/blue.png'>&nbsp;"+filter_08+"</label><br><input type='checkbox'id='green'><label for='green'><img src='graphic/dots/green.png'>&nbsp;"+filter_09+"</label><br><input type='checkbox'id='yellow'><label for='yellow'><img src='graphic/dots/yellow.png'>&nbsp;"+filter_10+"</label><br><input type='checkbox'id='red_yellow'><label for='red_yellow'><img src='graphic/dots/red_yellow.png'>&nbsp;"+filter_11+"</label><br><input type='checkbox'id='red_blue'><label for='red_blue'><img src='graphic/dots/red_blue.png'>&nbsp;"+filter_12+"</label><br><input type='checkbox'id='red'><label for='red'><img src='graphic/dots/red.png'>&nbsp;"+filter_13+"</label></form></td></tr><tr><td rowspan='2'><label for='order_by'>"+filter_14+":</label>&nbsp;<select id='order_by'val='distance'><option value='distance'>"+filter_15+"</option><option value='date'>"+filter_16+"</option></select><br><label for='direction'>"+filter_17+":</label>&nbsp;<select id='direction'val='desc'><option value='asc'>"+filter_18+"</option><option value='desc'>"+filter_19+"</option></select></td><td style='width:26px'><input type='checkbox'id='enable_hauls'></td><td style='width:110px'><label for='enable_hauls'>"+filter_20+"</label></td><td><input type='radio'name='hauls'id='full'><label for='full'><img src='graphic/max_loot/1.png'>"+filter_21+"</label>&nbsp;<input type='radio'name='hauls'id='partial'><label for='partial'><img src='graphic/max_loot/0.png'>"+filter_22+"</label></td></tr><tr><td><input type='checkbox'id='enable_attacks'></td><td><label for='enable_attacks'>"+filter_23+"</label></td><td><select id='attack_operator'><option value='greater_than'>"+filter_24+"</option><option value='less_than'>"+filter_25+"</option><option value='equal_to'>"+filter_26+"</option></select>&nbsp;<input type='text'id='attack_value'size='2'maxlength='2'value=''></td></tr><tr><td rowspan='1'><span style='font-weight:bold;'>"+filter_43+"</span></td><td><input type='checkbox'id='enable_walls'></td><td><label for='enable_walls'>"+filter_30+"</label></td><td><select id='wall_operator'><option value='greater_than'>"+filter_24+"</option><option value='less_than'>"+filter_25+"</option><option value='equal_to'>"+filter_26+"</option></select>&nbsp;<input type='text'id='wall_value'size='2'maxlength='2'value=''></td></tr><tr><td><input type='checkbox'id='next_village_no_farms'><label for='next_village_no_farms'>"+filter_39+"</label></td><td><input type='checkbox'id='enable_distances'></td><td><label for='enable_distances'>"+filter_31+"</label></td><td><select id='distance_operator'val='greater_than'><option value='greater_than'>"+filter_24+"</option><option value='less_than'>"+filter_25+"</option><option value='equal_to'>"+filter_26+"</option></select>&nbsp;<input type='text'id='distance_value'size='2'maxlength='2'value=''></td></tr><tr><td><input type='checkbox' id='next_village_units' />"+filter_44+"</td><td><input type='checkbox' id='enable_continents' /><td colspan='3'><select id='continent_display'><option value='hide'>"+filter_32+"</option><option value='show'>"+filter_33+"</option></select>&nbsp;<label for='continents_list'>"+filter_34+"</label>&nbsp;<input type='text'size='2'maxlength='150'id='continents_list'value=''>&nbsp;<img src='graphic/questionmark.png'height='13'id='continent_help'></td></tr><tr><td><input type='checkbox' id='next_village_scouts' /><input type='text' size='2' id='scouts_left' /> "+filter_45+"</td><td><input type='checkbox'id='enable_scout'></td><td colspan='3'><label for='enable_scout'>"+filter_35+"</label>&nbsp;<select id='scout_report_operator'val='greater_than'><option value='greater_than'>"+filter_24+"</option><option value='less_than'>"+filter_25+"</option><option value='equal_to'>"+filter_26+"</option></select>&nbsp;<input type='text'id='haul_value'size='9'maxlength='7'value=''></td></tr><tr><td><input type='checkbox' id='next_village_farming_troops' /><input type='text' size='2' id='farming_troops_left' /> "+filter_46+"</td><td><input type='checkbox'id='enable_time'></td><td colspan='3'><select id='attack_time_filter'val='hide'><option value='hide'>"+filter_32+"</option><option value='show'>"+filter_33+"</option></select>&nbsp;<label for='enable_time'>"+filter_36+"</label>&nbsp;<input type='text'id='time_value'size='2'maxlength='4'value=''><span>"+filter_37+"</span></td></tr><tr><td><input type='checkbox'id='enable_auto_run'><label for='enable_autoRun'>"+filter_38+"</label></td><td><input type='checkbox' id='hide_recent_farms' /></td><td colspan='3'><select id='sent_time_filter'val='hide'><option value='hide'>"+filter_32+"</option><option value='show'>"+filter_33+"</option></select>&nbsp;"+filter_47+" <input type='text' size='2' id='hide_recent_time' /> "+filter_48+"</td></tr><tr><th>"+filter_49+"</th><th colspan='4'>"+filter_50+"</th></tr><tr><td rowspan='4'><table><tr class='hotkey_values'><td><a href='#'onclick='return setKeyEditMode(\"A\")'id='button_a'class='farm_icon farm_icon_a'></a></td><td><a href='#'onclick='return setKeyEditMode(\"B\")'id='button_b'class='farm_icon farm_icon_b'></a></td><td><a href='#'onclick='return setKeyEditMode(\"C\")'id='button_c'class='farm_icon farm_icon_c'></a></td><td><a href='#'onclick='return setKeyEditMode(\"Master\")'id='button_master'class='farm_icon farm_icon_m'></a></td></tr><tr class='hotkey_values'><td><input type='text'class='hotkey_value' READONLY id='hotkey_value_a'value='A'></td><td><input type='text'class='hotkey_value' READONLY id='hotkey_value_b'value='B'></td><td><input type='text'class='hotkey_value' READONLY id='hotkey_value_c'value='C'></td><td><input type='text'class='hotkey_value' READONLY id='hotkey_value_master'value='M'></td></tr><tr class='hotkey_values'><td colspan='2'><input class='btn tooltip'onclick='return setKeyEditMode(\"Skip\")'type='button'value='Skip'style='margin:0px 0px 0px 0px'title='"+filter_51+"'></td><td><input class='btn tooltip'onclick='return setKeyEditMode(\"Left\")'type='button'value='Ã¢â€¡Å¡'style='margin:0px 0px 0px 0px'title='"+filter_52+"'></td><td><input class='btn tooltip'type='button'onclick='return setKeyEditMode(\"Right\")'value='Ã¢â€¡â€º'style='margin:0px 0px 0px 0px'title='"+filter_53+"'></td></tr><tr class='hotkey_values'><td colspan='2'><input type='text'class='hotkey_value' READONLY id='hotkey_value_skip'value='S'></td><td><input type='text'class='hotkey_value' READONLY id='hotkey_value_left'value='&#8592;'></td><td><input type='text'class='hotkey_value' READONLY id='hotkey_value_right'value='&#8594;'></td></tr></table></td><td><input type='checkbox' onchange='return updateKeypressSettings();' id='priorityOneEnabled'/></td><td colspan='3'>"+filter_54+" <select id='priorityOneProfile' onchange='return updateKeypressSettings();'></select> "+filter_55+" <select id='priorityOneButton' onchange='return updateKeypressSettings();'><option val='"+filter_56+"'>"+filter_56+"</option><option val='"+filter_57+"'>"+filter_57+"</option><option val='"+filter_58+"'>"+filter_58+"</option><option val='"+filter_59+"'>"+filter_59+"</option></select></td></tr><tr><td><input type='checkbox' onchange='return updateKeypressSettings();' id='priorityTwoEnabled'/></td><td colspan='3'>"+filter_54+" <select id='priorityTwoProfile' onchange='return updateKeypressSettings();'></select> "+filter_55+" <select id='priorityTwoButton' onchange='return updateKeypressSettings();'><option val='"+filter_56+"'>"+filter_56+"</option><option val='"+filter_57+"'>"+filter_57+"</option><option val='"+filter_58+"'>"+filter_58+"</option><option val='"+filter_59+"'>"+filter_59+"</option></select></td></tr><tr><td><input type='checkbox' onchange='return updateKeypressSettings();' id='priorityThreeEnabled'/></td><td colspan='3'>"+filter_54+" <select id='priorityThreeProfile' onchange='return updateKeypressSettings();'></select> "+filter_55+" <select id='priorityThreeButton' onchange='return updateKeypressSettings();'><option val='"+filter_56+"'>"+filter_56+"</option><option val='"+filter_57+"'>"+filter_57+"</option><option val='"+filter_58+"'>"+filter_58+"</option><option val='"+filter_59+"'>"+filter_59+"</option></select></td></tr><tr><td colspan='4'>"+filter_60+" <select id='defaultButton' onchange='return updateKeypressSettings();'><option val='"+filter_56+"'>"+filter_56+"</option><option val='"+filter_57+"'>"+filter_57+"</option><option val='"+filter_58+"'>"+filter_58+"</option><option val='"+filter_59+"'>"+filter_59+"</option></select></td></tr><tr><td colspan='5'><div style='float:left'><input type='submit'value='"+profile_02+"'onclick='applySettings()'>&nbsp;<input type='submit'value='"+profile_03+"'onclick='resetTable()'></div><div style='float:right'><img src='graphic/questionmark.png'width='13'height='13'id='profile_help'>&nbsp;<label for='settingsProfile'>"+profile_01+":</label>&nbsp;<select id='settingsProfile'onchange='changeProfile(window.top.$(&quot;#settingsProfile&quot;).val())'></select>&nbsp;<input type='submit'value='"+profile_04+"'onclick='createProfile()'>&nbsp;<input type='submit'value='"+profile_05+"'onclick='setDefaultProfile()'>&nbsp;<input type='submit'value='"+profile_06+"'onclick='deleteProfile()'>&nbsp;<input type='submit'value='"+profile_07+"'onclick='updateProfile()'>&nbsp;<input type='submit'value='"+profile_08+"'onclick='exportProfile()'>&nbsp;<input type='submit'value='"+profile_09+"'onclick='importProfile()'></div></td></tr></tbody></table></div>")),P(),st(),bt.top.$("#language option[value='"+bt.top.$.jStorage.get("language")+"']").attr("selected","selected")},P=function(){bt.top.$("#all_none").bind("click",function(){bt.top.$(this).closest("form").find(":checkbox").prop("checked",this.checked)});var t=bt.top.$("#report_help");t.attr("title",instructions_01),bt.top.UI.ToolTip(t);var e=bt.top.$("#enable_help");e.attr("title",instructions_02),bt.top.UI.ToolTip(e);var o=bt.top.$("#continent_help");o.attr("title",instructions_03),bt.top.UI.ToolTip(o);var i=bt.top.$("#recent_help");i.attr("title",instructions_04),bt.top.UI.ToolTip(i);var a=bt.top.$("#profile_help");a.attr("title",instructions_05),bt.top.UI.ToolTip(a),Q(),X(),nt(),rt()},B=function(){bt.top.$("#plunder_list tr:gt(0)").remove(),bt.top.$("#plunder_list_nav").hide()},q=function(t){var e=t.find("a").attr("onclick");if(void 0!==e){var o=e.slice(e.indexOf("(")+1,e.indexOf(")")),i=o.split(",");-1==e.indexOf("FromReport")?t.find("a").attr("onclick","return customSendUnits("+o+", window.top.$(this))"):t.find("a").attr("onclick","return customSendUnitsFromReport("+o+"))"),t.closest("tr").attr("name",bt.top.$.trim(i[1]))}},D=function(){bt.top.$("#am_widget_Farm tr th").slice(0,1).after("<th></th>"),bt.top.$("#am_widget_Farm tr:not(:first-child)").each(function(t){bt.top.$(this).children("td").each(function(e){switch(e){case 1:bt.top.$(this).filter(":first").before("<td style='width:10px;font-weight:bold;' id='rowNum'>"+(t+1)+"</td>");break;case 3:var o=bt.top.$(this).find("img"),i=bt.top.$(this).find("img").prop("tooltipText");if(void 0!==i){var a=i.replace(/\D/g,"");o.after("<span style='font-weight:bold;'> ("+a+")</span>")}break;case 8:case 9:case 10:q(bt.top.$(this))}})})},A=function(){if((e=bt.top.Accountmanager.farm.current_units,g[v.next_village_scouts])&&e.spy<=parseInt(g[v.scouts_left]))return O("n"),!0;if(g[v.next_village_farming_troops]){var t=0;if(bt.top.$(".fm_unit input:checked").each(function(o){var i=bt.top.$(this).attr("name");t+=parseInt(e[i])}),t<=parseInt(g[v.farming_troops_left]))return O("n"),!0}if(g[v.next_village_no_farms]&&0==bt.top.$("#plunder_list tr:not(:first-child):visible").length)return O("n"),!0},F=function(){l?K():(setTimeout(T(),1),B())},K=function(){bt.top.$("#am_widget_Farm tr:gt(0)").each(function(t){(c=L(bt.top.$(this),g))&&bt.top.$(this).hide()}),E(filter_40);var t=0;"fixed"==bt.top.$("#topContainer").css("position")&&(t=bt.top.$("#topContainer").height()),bt.top.$('*:contains("Bot Protection")').length?(bt.top.$("html, body").animate({scrollTop:bt.top.$('*:contains("Bot Protection")').offset().top-t},500),"function"==typeof showNotification&&showNotification("custom",["LA Enhancer has encountered bot protection. Please respond to captcha to continue farming."],null,"Bot Protection"),s=!1):bt.top.$("html, body").animate({scrollTop:bt.top.$("#farm_units").offset().top-t},500),p=!0},L=function(t,e){return c=!1,t.children("td").each(function(t){switch(t){case 2:M(bt.top.$(this),e);break;case 3:R(bt.top.$(this),e);break;case 4:z(bt.top.$(this),e),N(bt.top.$(this),e),U(bt.top.$(this),e);break;case 5:Y(bt.top.$(this),e);break;case 6:G(bt.top.$(this),e);break;case 7:W(bt.top.$(this),e);break;case 8:V(bt.top.$(this),e)}}),!!c&&(h=[],!0)},M=function(t,e){return t.html().indexOf("blue")>=0&&e[v.blue]?(h.push("Report is blue"),void(c=!0)):t.html().indexOf("green")>=0&&e[v.green]?(h.push("Report is green"),void(c=!0)):t.html().indexOf("yellow")>=0&&e[v.yellow]?(h.push("Report is yellow"),void(c=!0)):t.html().indexOf("red_yellow")>=0&&e[v.red_yellow]?(h.push("Report is red_yellow"),void(c=!0)):t.html().indexOf("red_blue")>=0&&e[v.red_blue]?(h.push("Report is red_blue"),void(c=!0)):t.html().indexOf("red")>=0&&e[v.red]?(h.push("Report is red"),void(c=!0)):void 0},R=function(t,e){if(e[v.enable_hauls]){if(t.html().indexOf("max_loot/1")>=0&&e[v.full])return h.push("Haul is full"),void(c=!0);if(t.html().indexOf("max_loot/0")>=0&&e[v.partial])return h.push("Haul is partial"),void(c=!0);if(-1==t.html().indexOf("max_loot")&&e[v.full])return h.push("No haul graphic"),void(c=!0)}},z=function(t,e){if(e[v.hide_recent_farms]){var o=t.closest("tr").attr("name");localTitle="sitter:"+f+", village:"+o+", world:"+ct()[0];var i=new Date(bt.top.$.jStorage.get(localTitle)),a=_.getTime()-i.getTime(),r=Math.abs(parseInt(a/1e3/60));switch(e[v.sent_time_filter]){case"hide":if(r<parseInt(e[v.hide_recent_time]))return h.push("Village was recently sent to "+r+" minutes ago"),void(c=!0);break;case"show":if(r>parseInt(e[v.hide_recent_time]))return h.push("Village was not recently sent to"),void(c=!0)}}},N=function(t,e){var o,i=t.find("img");if(o=void 0!==i.prop("tooltipText")?parseInt(i.prop("tooltipText").replace(/\D/g,"")):0,e[v.enable_attacks])switch(e[v.attack_operator]){case"greater_than":if(o>parseInt(e[v.attack_value]))return h.push("Outgoing attacks is too many"),void(c=!0);break;case"less_than":if(o<parseInt(e[v.attack_value]))return h.push("Outgoing attacks is too few"),void(c=!0);break;case"equal_to":if(o==parseInt(e[v.attack_value]))return h.push("Outgoing attacks is equal"),void(c=!0)}},U=function(t,e){var o=t.find("a").html();if(void 0!==o){o=o.substr(o.length-2);var i=e[v.continents_list].split(".");if(bt.top.$.inArray(o,i)>=0&&"hide"==e[v.continent_display])return h.push("Continent is set to hide"),void(c=!0);if(-1==bt.top.$.inArray(o,i)&&"show"==e[v.continent_display])return h.push("Continent is not set to show"),void(c=!0)}},Y=function(t,e){if(e[v.enable_time]){var o=_,i=J(t),a=o.getTime()-i.getTime(),r=Math.abs(parseInt(a/1e3/60));switch(e[v.attack_time_filter]){case"hide":if(r<parseInt(e[v.time_value]))return h.push("Village attacked "+r+" minutes ago."),void(c=!0);break;case"show":if(r>parseInt(e[v.time_value]))return h.push("Village attacked "+r+" minutes ago."),void(c=!0)}}},G=function(t,e){var o;if(e[v.enable_scout]){if("?"==bt.top.$.trim(t.find("span").html()))o=0;else o=parseInt(t.children("span").eq(0).html().replace(/\D+/g,""))+parseInt(t.children("span").eq(1).html().replace(/\D+/g,""))+parseInt(t.children("span").eq(2).html().replace(/\D+/g,""));switch(e[v.scout_report_operator]){case"greater_than":if(o>parseInt(e[v.haul_value]))return h.push("Too many resources"),void(c=!0);break;case"less_than":if(o<parseInt(e[v.haul_value]))return h.push("Not enough resources"),void(c=!0);break;case"equal_to":if(o==parseInt(e[v.haul_value]))return h.push("Exact resources"),void(c=!0)}}},W=function(t,e){if(e[v.enable_walls]){var o=parseInt(t.html());switch("?"==o&&(o=0),bt.top.$.trim(e[v.wall_operator])){case"greater_than":if(o>parseInt(e[v.wall_value]))return h.push("Wall too high"),void(c=!0);break;case"less_than":if(o<parseInt(e[v.wall_value]))return h.push("Wall too low"),void(c=!0);break;case"equal_to":if(o==parseInt(e[v.wall_value]))return h.push("Wall is exact"),void(c=!0)}}},V=function(t,e){if(e[v.enable_distances]){var o=t.html();switch(bt.top.$.trim(e[v.distance_operator])){case"greater_than":if(parseFloat(o)>parseFloat(e[v.distance_value]))return h.push("Village too far"),void(c=!0);break;case"less_than":if(parseFloat(o)<parseFloat(e[v.distance_value]))return h.push("Village too close"),void(c=!0);break;case"equal_to":if(parseFloat(o)==parseFloat(e[v.distance_value]))return h.push("Village exact distance"),void(c=!0)}}},H=function(){var t=bt.top.$("#serverTime").html().split(":"),e=bt.top.$("#serverDate").html().split("/");return new Date(e[2],e[1]-1,e[0],t[0],t[1],t[2],0)},J=function(t){for(var e,o,i=(u=t.html()).split(" "),a=0;a<i.length;a++)(t=bt.top.$.trim(i[a])).indexOf(".")>-1?e=t:t==filter_61?e=filter_61:t==filter_62&&(e=filter_62),t.indexOf(":")>-1&&(o=t);if(e==filter_61||e==filter_62){var r=_.getDate();e==filter_62&&r--;var n=_.getMonth(),l=_.getFullYear(),p=(u=o.split(":"))[0],s=u[1],c=u[2];return new Date(l,n,r,p,s,c,0)}var d=e.split(".");r=d[0],n=d[1]-1;if(0==_.getMonth()&&11==n)l=_.getFullYear()-1;else l=_.getFullYear();var u;p=(u=o.split(":"))[0],s=u[1],c=u[2];return new Date(l,n,r,p,s,c,0)},Q=function(){null==bt.top.$.jStorage.get("profile:"+profile_10)&&(bt.top.$.jStorage.set("profile:"+profile_10,["1","1","distance","asc",!1,!1,!1,!1,!1,!1,!1,!1,"hide","",!1,!1,!1,!1,"greater_than","",!1,"greater_than","",!1,"greater_than","",!1,"greater_than","","hide","",!1,"hide","",!1,!1,!1,"",!1,"",!1]),bt.top.$.jStorage.deleteKey("profileList"),bt.top.$.jStorage.set("profileList",[profile_10])),g=bt.top.$.jStorage.get("profile:"+profile_10),Z(profile_10),bt.top.$("#settingsProfile").val(profile_10)},X=function(){var t=bt.top.$.jStorage.get("profileList");bt.top.$.each(t,function(t,e){bt.top.$("#settingsProfile").append("<option value='"+e+"'>"+e+"</option>")}),bt.top.$("#settingsProfile").val(bt.top.$.jStorage.get("DefaultProfile"))},Z=function(t){var e=bt.top.$.jStorage.get("profile:"+t);g=e,bt.top.$("#start_page").val(e[0]),bt.top.$("#end_page").val(e[1]),bt.top.$("#order_by").val(e[2]),bt.top.$("#direction").val(e[3]),bt.top.$("#all_none").prop("checked",e[4]),bt.top.$("#blue").prop("checked",e[5]),bt.top.$("#green").prop("checked",e[6]),bt.top.$("#yellow").prop("checked",e[7]),bt.top.$("#red_yellow").prop("checked",e[8]),bt.top.$("#red_blue").prop("checked",e[9]),bt.top.$("#red").prop("checked",e[10]),bt.top.$("#hide_recent_farms").prop("checked",e[11]),bt.top.$("#sent_time_filter").val(e[12]),bt.top.$("#hide_recent_time").val(e[13]),bt.top.$("#enable_hauls").prop("checked",e[14]),bt.top.$("#full").prop("checked",e[15]),bt.top.$("#partial").prop("checked",e[16]),bt.top.$("#enable_attacks").prop("checked",e[17]),bt.top.$("#attack_operator").val(e[18]),bt.top.$("#attack_value").val(e[19]),bt.top.$("#enable_walls").prop("checked",e[20]),bt.top.$("#wall_operator").val(e[21]),bt.top.$("#wall_value").val(e[22]),bt.top.$("#enable_distances").prop("checked",e[23]),bt.top.$("#distance_operator").val(e[24]),bt.top.$("#distance_value").val(e[25]),bt.top.$("#enable_scout").prop("checked",e[26]),bt.top.$("#scout_report_operator").val(e[27]),bt.top.$("#haul_value").val(e[28]),bt.top.$("#continent_display").val(e[29]),bt.top.$("#continents_list").val(e[30]),bt.top.$("#enable_time").prop("checked",e[31]),bt.top.$("#attack_time_filter").val(e[32]),bt.top.$("#time_value").val(e[33]),bt.top.$("#enable_auto_run").prop("checked",e[34]),bt.top.$("#next_village_no_farms").prop("checked",e[35]),bt.top.$("#next_village_scouts").prop("checked",e[36]),bt.top.$("#scouts_left").val(e[37]),bt.top.$("#next_village_farming_troops").prop("checked",e[38]),bt.top.$("#farming_troops_left").val(e[39]),bt.top.$("#next_village_units").prop("checked",e[40])},tt=function(){bt.top.$("#settingsBody tr:lt(9) input,#settingsBody tr:lt(9) select").focusin(function(){bt.onkeydown=function(){}}),bt.top.$("#settingsBody tr:lt(9) input,#settingsBody tr:lt(9) select").focusout(function(){et()})},et=function(){bt.onkeydown=function(t){if(d)at(t);else{var e=bt.top.$("#plunder_list tr").filter(":visible").eq(1),o=e.children("td").eq(9).children("a"),i=e.children("td").eq(10).children("a"),a=e.children("td").eq(11).children("a");switch(t.which){case m.a:ot(o);break;case m.b:ot(i);break;case m.c:ot(a);break;case m.skip:e.hide();break;case m.master:s&&p&&lt(e);break;case m.left:O("p");break;case m.right:O("n");break;default:return}}t.preventDefault()}},ot=function(t){s&&p&&(A()||(t.hasClass("farm_icon_disabled")||null==t.html()?(bt.top.UI.ErrorMessage("That button is not selectable. Skipping row...",500),t.closest("tr").hide()):(t.click(),g[v.next_village_scouts]||g[v.next_village_farming_troops],it(200))))},it=function(t){s=!1,setTimeout(function(){s=!0},t)},at=function(t){if(!(t.keyCode<=37&&t.keyCode>=40||t.keyCode<=48&&t.keyCode>=90)){String.fromCharCode(t.keyCode);return 37==t.keyCode&&"Ã¢â€ Â",38==t.keyCode&&"Ã¢â€ â€˜",39==t.keyCode&&"Ã¢â€ â€™",void(40==t.keyCode&&"Ã¢â€ â€œ")}bt.top.UI.ErrorMessage("You can only enter letters, numbers, or arrows. Plese try another key.",1500)},rt=function(){null==bt.top.$.jStorage.get("keyPressSettings")&&bt.top.$.jStorage.set("keyPressSettings",y),y=bt.top.$.jStorage.get("keyPressSettings"),m.a=y.a_code,bt.top.$("#hotkey_value_a").val(y.a_char),m.b=y.b_code,bt.top.$("#hotkey_value_b").val(y.b_char),m.c=y.c_code,bt.top.$("#hotkey_value_c").val(y.c_char),m.master=y.master_code,bt.top.$("#hotkey_value_master").val(y.master_char),m.skip=y.skip_code,bt.top.$("#hotkey_value_skip").val(y.skip_char),m.left=y.left_code,bt.top.$("#hotkey_value_left").val(y.left_char),m.right=y.right_code,bt.top.$("#hotkey_value_right").val(y.right_char),bt.top.$("#priorityOneEnabled").prop("checked",y.priorityOneEnabled),bt.top.$("#priorityOneProfile").val(y.priorityOneProfile),bt.top.$("#priorityOneButton").val(y.priorityOneButton),bt.top.$("#priorityTwoEnabled").prop("checked",y.priorityTwoEnabled),bt.top.$("#priorityTwoProfile").val(y.priorityTwoProfile),bt.top.$("#priorityTwoButton").val(y.priorityTwoButton),bt.top.$("#priorityThreeEnabled").prop("checked",y.priorityThreeEnabled),bt.top.$("#priorityThreeProfile").val(y.priorityThreeProfile),bt.top.$("#priorityThreeButton").val(y.priorityThreeButton),bt.top.$("#defaultButton").val(y.defaultButton)},nt=function(){var t=bt.top.$.jStorage.get("profileList");bt.top.$.each(t,function(t,e){bt.top.$("#priorityOneProfile").append("<option value='"+e+"'>"+e+"</option>"),bt.top.$("#priorityTwoProfile").append("<option value='"+e+"'>"+e+"</option>"),bt.top.$("#priorityThreeProfile").append("<option value='"+e+"'>"+e+"</option>")})},lt=function(t){var e,o=bt.top.$.jStorage.get("profile:"+y.priorityOneProfile),i=bt.top.$.jStorage.get("profile:"+y.priorityTwoProfile),a=bt.top.$.jStorage.get("profile:"+y.priorityThreeProfile),r=t.children("td").eq(9).children("a"),n=t.children("td").eq(10).children("a"),l=t.children("td").eq(11).children("a");switch(e=y.defaultButton,y.priorityThreeEnabled&&!L(t,a)&&(e=y.priorityThreeButton),y.priorityTwoEnabled&&!L(t,i)&&(e=y.priorityTwoButton),y.priorityOneEnabled&&!L(t,o)&&(e=y.priorityOneButton),e){case"A":ot(r);break;case"B":ot(n);break;case"C":ot(l);break;default:t.hide()}},pt=function(){var t=ct();switch(3==t.length&&t.shift(),t.join(".")){case"fyletikesmaxes.gr":bt.top.$.jStorage.set("language","el");break;case"tribals.it":bt.top.$.jStorage.set("language","it");break;case"guerrastribales.es":bt.top.$.jStorage.set("language","es");break;case"tribalwars.ae":bt.top.$.jStorage.set("language","ar");break;default:bt.top.$.jStorage.set("language","en")}},st=function(){bt.top.$("#language").append("<option value='en'>English</option>"),bt.top.$("#language").append("<option value='el'>ÃŽâ€¢ÃŽÂ»ÃŽÂ»ÃŽÂ·ÃŽÂ½ÃŽÂ¹ÃŽÂºÃŽÂ¬</option>"),bt.top.$("#language").append("<option value='it'>Italiano</option>"),bt.top.$("#language").append("<option value='es'>EspaÃƒÂ±ol</option>"),bt.top.$("#language").append("<option value='ar'>Ã˜Â§Ã™â€žÃ™â€žÃ˜ÂºÃ˜Â© Ã˜Â§Ã™â€žÃ˜Â¹Ã˜Â±Ã˜Â¨Ã™Å Ã˜Â©</option>")},ct=function(){var t=bt.location.hostname;return t=t.split(".")},dt=function(){"am_farm"!==bt.top.game_data.screen?ut():$()},ut=function(){ht(),_t();var t=b[0]+bt.top.game_data.village.id+b[1];bt.top.$.getScript("https://"+bt.top.location.host+"/js/game/Accountmanager.js",function(){bt.top.$.ajax({type:"GET",url:t,dataType:"html",error:function(t,e,o){alert("Get LA error: "+o),bt.top.$("#fader").remove(),bt.top.$("#loaders").remove()},success:function(t){var e=bt.top.$(t),o=/<\s*title\s*>([^<]+)<\/title\s*>/g.exec(t)[1],i=bt.top.$.parseJSON(t.split("TribalWars.updateGameData(")[1].split(");")[0]);bt.top.game_data=i,"undefined"!=typeof history&&"function"==typeof history.pushState&&history.pushState({},bt.top.game_data.village.name+" - Loot Assistant","https://"+bt.top.location.host+game_data.link_base_pure+"am_farm"),bt.top.$("#header_info").html(bt.top.$("#header_info",e).html()),bt.top.$("#topContainer").html(bt.top.$("#topContainer",e).html()),bt.top.$("#contentContainer").html(bt.top.$("#contentContainer",e).html()),bt.top.$("head").find("title").html(o),bt.top.$("#fader").remove(),bt.top.$("#loaders").remove(),$()}})})},ht=function(){var t=bt.top.document.createElement("div");t.id="fader",t.style.position="fixed",t.style.height="100%",t.style.width="100%",t.style.backgroundColor="black",t.style.top="0px",t.style.left="0px",t.style.opacity="0.6",t.style.zIndex="12000",bt.top.document.body.appendChild(t)},_t=function(){var t=bt.top.document.createElement("div");t.id="loaders",t.style.position="fixed",t.style.width="24px",t.style.height="24px",t.style.top="50%",t.style.left="50%",bt.top.$(t).css("margin-left","-12px"),bt.top.$(t).css("margin-top","-12px"),t.style.zIndex=13e3,bt.top.$(t).append(bt.top.$("<img src='graphic/throbber.gif' height='24' width='24'></img>")),bt.top.$("#contentContainer").append(bt.top.$(t))},ft=function(){bt.top.$(".row_a").css("background-color","rgb(216, 255, 216)"),bt.top.$("#plunder_list tr").eq(0).remove(),bt.top.$("#plunder_list").find("tr:gt(0)").each(function(t){bt.top.$(this).removeClass("row_a"),bt.top.$(this).removeClass("row_b"),t%2==0?bt.top.$(this).addClass("row_a"):bt.top.$(this).addClass("row_b")}),gt()},gt=function(){bt.top.$("#plunder_list").hide(),bt.top.$("#plunder_list_nav").hide(),bt.top.$("#contentContainer").find('div[class="vis"]').eq(0).children().eq(0).append(bt.top.$("<div class='vis' style='float:right;text-align:center;line-height:100%;width:12px;height:12px;margin:0px 0px 0px 0px;position:relative;background-color:tan;opacity:.7'><a href='#' num='0' onclick='uglyHider(window.top.$(this));return false;'>+</a></div>")),bt.top.$("#contentContainer").find('div[class="vis"]').eq(0).children().eq(1).hide(),bt.top.$("#am_widget_Farm").find("h4").eq(0).append(bt.top.$("<div class='vis' style='float:right;text-align:center;line-height:100%;width:12px;height:12px;margin:0px 0px 0px 0px;position:relative;background-color:tan;opacity:.7'><a href='#' num='1' onclick='uglyHider(window.top.$(this));return false;'>+</a></div>")),bt.top.$("#plunder_list_filters").hide()};let bt=t("window");t("self");let vt=t("document");t("location"),t("top"),t("parent"),t("frames"),t("opener");var e,o="1.13.2",i="LA Enhancer (1.13.2)",a="https://ntoombs19.github.io/LA-Enhancer/",r="https://ntoombs19.github.io/LA-Enhancer/",n=!0,l=!1,p=!1,s=!0,c=!1,d=!1,u=!1,h=[],_=H(),f="";"0"!=bt.top.game_data.player.sitter&&(f="t="+bt.top.game_data.player.id+"&");var g,b=["https://"+bt.location.host+"/game.php?"+f+"village=","&screen=am_farm"],v={start_page:0,end_page:1,order_by:2,direction:3,all_none:4,blue:5,green:6,yellow:7,red_yellow:8,red_blue:9,red:10,hide_recent_farms:11,sent_time_filter:12,hide_recent_time:13,enable_hauls:14,full:15,partial:16,enable_attacks:17,attack_operator:18,attack_value:19,enable_walls:20,wall_operator:21,wall_value:22,enable_distances:23,distance_operator:24,distance_value:25,enable_scout:26,scout_report_operator:27,haul_value:28,continent_display:29,continents_list:30,enable_time:31,attack_time_filter:32,time_value:33,enable_auto_run:34,next_village_no_farms:35,next_village_scouts:36,scouts_left:37,next_village_farming_troops:38,farming_troops_left:39,next_village_units:40},m={a:65,b:66,c:67,skip:83,right:39,left:37,master:77},y={a_code:65,a_char:"A",b_code:66,b_char:"B",c_code:67,c_char:"C",master_code:77,master_char:"M",skip_code:83,skip_char:"S",left_code:37,left_char:"Ã¢â€ Â",right_code:39,right_char:"Ã¢â€ â€™",priorityOneEnabled:!0,priorityOneProfile:"Default",priorityOneButton:"Skip",priorityTwoEnabled:!0,priorityTwoProfile:"Default",priorityTwoButton:"Skip",priorityThreeEnabled:!0,priorityThreeProfile:"Default",priorityThreeButton:"Skip",defaultButton:"Skip"};bt.top.$.getScript(a+"lib/jstorage.js",function(){bt.top.$.getScript(a+"resources.js",function(){null==bt.top.$.jStorage.get("language")&&pt(),bt.top.$.getScript(a+"lang/"+bt.top.$.jStorage.get("language")+".js",function(){dt()})}),bt.top.$.getScript(a+"notify.js")}),bt.top.$(vt).off()}
